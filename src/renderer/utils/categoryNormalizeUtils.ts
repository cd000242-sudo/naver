/**
 * ✅ [2026-01-25 모듈화] Category Normalize Utils
 * - renderer.ts에서 분리됨
 * - 카테고리 정규화 매핑 테이블 및 관련 함수
 */

// ✅ [100점 수정] 카테고리 정규화 매핑 테이블 (영어 → 한글 통일)
// ✅ [2026-01-23] 네이버 블로그 카테고리를 앱의 콘텐츠 카테고리로 포괄적 매핑
export const CATEGORY_NORMALIZE_MAP: Record<string, string | null> = {
    // ===== 기본 카테고리 =====
    'general': '일반',
    '일반': '일반',

    // ===== 스타 연예인 (엔터테인먼트·예술 관련) =====
    'entertainment': '스타 연예인',
    'star': '스타 연예인',
    '스타': '스타 연예인',
    '연예인': '스타 연예인',
    '스타연예인': '스타 연예인',
    '스타·연예인': '스타 연예인',
    '드라마': '스타 연예인',
    '방송': '스타 연예인',
    '만화·애니': '스타 연예인',
    '만화애니': '스타 연예인',
    '연예/이슈': '스타 연예인',
    '연예이슈': '스타 연예인',
    // ✅ [2026-02-02 FIX] 누락된 연예 세부 카테고리 추가
    '연예/드라마': '스타 연예인',
    '연예/방송': '스타 연예인',
    '연예/예술': '스타 연예인',
    '연예/음악': '스타 연예인',
    'celebrity': '스타 연예인',

    // ===== 스타 연예인 추가 매핑 (트렌드 및 이슈 등) =====
    '트렌드 및 이슈': '스타 연예인',  // ✅ [2026-01-24 FIX] 연예/이슈 관련은 스타 연예인으로
    '이슈': '스타 연예인',

    // ===== 사회 정치 (뉴스·사회 관련) =====
    'news': '사회 정치',
    '뉴스': '사회 정치',
    '뉴스 이슈': '사회 정치',  // ✅ 레거시 값 매핑
    '뉴스이슈': '사회 정치',
    '사회': '사회 정치',
    '정치': '사회 정치',
    '사회·정치': '사회 정치',
    '사회정치': '사회 정치',

    // ===== 스포츠 =====
    'sports': '스포츠',
    '스포츠': '스포츠',

    // ===== 건강 (건강·의학 관련) =====
    'health': '건강',
    '건강': '건강',
    '헬스': '건강',
    '의료': '건강',
    '의학': '건강',
    '건강·의학': '건강',
    '건강의학': '건강',

    // ===== 비즈니스 경제 =====
    'finance': '비즈니스 경제',
    'economy': '비즈니스 경제',
    '경제': '비즈니스 경제',
    '재테크': '비즈니스 경제',
    '비즈니스': '비즈니스 경제',
    '비즈니스경제': '비즈니스 경제',
    '비즈니스·경제': '비즈니스 경제',
    '지원금': '비즈니스 경제',
    '주식': '비즈니스 경제',
    '투자': '비즈니스 경제',

    // ===== IT 테크 (IT·컴퓨터 관련) =====
    'it_review': 'IT 테크',
    'it': 'IT 테크',
    'tech': 'IT 테크',
    '테크': 'IT 테크',
    '아이티': 'IT 테크',
    'it테크': 'IT 테크',
    'computer': 'IT 테크',
    '컴퓨터': 'IT 테크',
    'pc': 'IT 테크',
    '피씨': 'IT 테크',
    'digital': 'IT 테크',
    '디지털': 'IT 테크',
    'IT·컴퓨터': 'IT 테크',
    'IT컴퓨터': 'IT 테크',

    // ===== 제품 리뷰 =====
    'product_review': '제품 리뷰',
    '제품리뷰': '제품 리뷰',
    '제품 리뷰': '제품 리뷰',
    '리뷰': '제품 리뷰',
    '후기': '제품 리뷰',

    // ===== 요리 맛집 (맛집, 음식 관련) =====
    'food': '요리 맛집',
    'restaurant': '요리 맛집',
    '맛집': '요리 맛집',
    '요리': '요리 맛집',
    '음식': '요리 맛집',
    '푸드': '요리 맛집',
    '요리맛집': '요리 맛집',
    '레시피': '요리 맛집',

    // ===== 교육/육아 (육아·결혼, 교육·학문 관련) =====
    'education': '교육/육아',
    'parenting': '교육/육아',
    '교육': '교육/육아',
    '육아': '교육/육아',
    '결혼': '교육/육아',
    '육아결혼': '교육/육아',
    '육아·결혼': '교육/육아',
    '학문': '교육/육아',
    '교육·학문': '교육/육아',
    '교육학문': '교육/육아',

    // ===== 여행 (국내·해외 여행 관련) =====
    'travel': '여행',
    '여행': '여행',
    '국내여행': '여행',
    '국내 여행': '여행',
    '세계여행': '여행',
    '해외여행': '여행',

    // ===== 리빙 인테리어 (인테리어·DIY 관련) =====
    'interior': '리빙 인테리어',
    'living': '리빙 인테리어',
    '리빙': '리빙 인테리어',
    '인테리어': '리빙 인테리어',
    '리빙인테리어': '리빙 인테리어',
    'DIY': '리빙 인테리어',
    '인테리어·DIY': '리빙 인테리어',
    '인테리어DIY': '리빙 인테리어',
    // ✅ [2026-02-02 FIX] 가구 관련 카테고리 추가
    '가구리뷰': '리빙 인테리어',
    '가구 리뷰': '리빙 인테리어',
    '가구': '리빙 인테리어',

    // ===== 반려동물 =====
    'pet': '반려동물',
    '반려동물': '반려동물',
    '펫': '반려동물',
    '강아지': '반려동물',
    '고양이': '반려동물',

    // ===== 패션 뷰티 (패션·미용 관련) =====
    'fashion': '패션 뷰티',
    'beauty': '패션 뷰티',
    '패션': '패션 뷰티',
    '뷰티': '패션 뷰티',
    '미용': '패션 뷰티',
    '패션뷰티': '패션 뷰티',
    '패션·미용': '패션 뷰티',
    '패션미용': '패션 뷰티',

    // ===== 취미 라이프 (취미 관련) =====
    'hobby': '취미 라이프',
    '취미': '취미 라이프',
    '라이프': '취미 라이프',
    '취미라이프': '취미 라이프',
    '일상': '취미 라이프',
    '생각': '취미 라이프',
    '일상·생각': '취미 라이프',
    '일상생각': '취미 라이프',
    '좋은글·이미지': '취미 라이프',
    '좋은글': '취미 라이프',

    // ===== 부동산 =====
    'realestate': '부동산',
    'real_estate': '부동산',
    '부동산': '부동산',

    // ===== 자동차 =====
    'car': '자동차',
    '자동차': '자동차',
    '차량': '자동차',

    // ===== 책 영화 (문학·책, 영화 관련) =====
    'book_movie': '책 영화',
    'book': '책 영화',
    'movie': '책 영화',
    '책': '책 영화',
    '영화': '책 영화',
    '도서': '책 영화',
    '책영화': '책 영화',
    '문학': '책 영화',
    '문학·책': '책 영화',
    '문학책': '책 영화',

    // ===== 자기계발 =====
    'self_dev': '자기계발',
    'selfdev': '자기계발',
    '자기계발': '자기계발',

    // ===== 공부 (어학·외국어 관련) =====
    'study': '공부',
    '공부': '공부',
    '학습': '공부',
    '어학': '공부',
    '외국어': '공부',
    '어학·외국어': '공부',
    '어학외국어': '공부',

    // ===== 게임 =====
    'game': '게임',
    '게임': '게임',

    // ===== 사진 영상 =====
    'photo_video': '사진 영상',
    'photo': '사진 영상',
    'video': '사진 영상',
    '사진': '사진 영상',
    '영상': '사진 영상',
    '사진영상': '사진 영상',

    // ===== 예술 (미술·디자인, 공연·전시 관련) =====
    'art': '예술',
    '예술': '예술',
    '미술': '예술',
    '디자인': '예술',
    '미술·디자인': '예술',
    '미술디자인': '예술',
    '공연': '예술',
    '전시': '예술',
    '공연·전시': '예술',
    '공연전시': '예술',

    // ===== 음악 =====
    'music': '음악',
    '음악': '음악',

    // ===== 생활 꿀팁 (원예·재배 포함) =====
    'tips': '생활 꿀팁',
    '꿀팁': '생활 꿀팁',
    '생활': '생활 꿀팁',
    '생활꿀팁': '생활 꿀팁',
    '생활 꿀팁': '생활 꿀팁',
    '원예': '생활 꿀팁',
    '재배': '생활 꿀팁',
    '원예·재배': '생활 꿀팁',
    '원예재배': '생활 꿀팁',

    // ===== 기사 유형은 카테고리가 아님 (무시) =====
    'seo': null,
    'homefeed': null,
    'traffic-hunter': null,
    'shopping-connect': null,
    'trafficHunter': null,
    'shoppingConnect': null,

    // ===== [2026-01-26 FIX] 복합 카테고리 정규화 (사용자 피드백 반영) =====
    // 가전/IT 관련
    '가전리뷰': 'IT 테크',
    '가전 리뷰': 'IT 테크',
    'IT/가전 리뷰': 'IT 테크',
    'IT/가전': 'IT 테크',
    '디지털/가전': 'IT 테크',
    'IT/가전/리빙': 'IT 테크',
    '건강/가전 리뷰': 'IT 테크',
    '가전': 'IT 테크',

    // 인테리어/리빙 관련
    '가구/인테리어': '리빙 인테리어',
    '인테리어/생활': '리빙 인테리어',
    '생활/리빙': '리빙 인테리어',

    // 라이프/일상 관련
    '라이프/일상/쇼핑': '취미 라이프',
    '라이프/일상': '취미 라이프',
    '일상/쇼핑': '취미 라이프',
    '연예/라이프': '스타 연예인',

    // 연예 관련
    '연예': '스타 연예인',
    '연예뉴스': '스타 연예인',
    '방송연예': '스타 연예인',
    '스타 연예인': '스타 연예인',

    // 건강/생활 관련
    '생활/건강': '건강',
    '건강/생활': '건강',
    '생활/건강 > 음반 > 해외앨범': '음악',

    // 쇼핑/제품 관련
    '쇼핑정보': '제품 리뷰',
    '쇼핑': '제품 리뷰',
    '쇼핑 정보': '제품 리뷰',

    // 지원금/경제 관련
    '지원금 관련': '비즈니스 경제',
    '지원금관련': '비즈니스 경제',
};


/**
 * ✅ [100점 수정] 카테고리 정규화 함수
 * 영어/약어 카테고리를 한글 표준 카테고리로 변환
 */
export function normalizeCategory(category: string | undefined | null): string {
    if (!category) return '';

    const trimmed = category.trim();
    const lower = trimmed.toLowerCase();

    // 매핑 테이블에 있으면 변환
    if (CATEGORY_NORMALIZE_MAP.hasOwnProperty(lower)) {
        const mapped = CATEGORY_NORMALIZE_MAP[lower];
        if (mapped === null) return ''; // 기사 유형은 카테고리가 아님
        return mapped;
    }

    // 이미 한글 표준 카테고리면 그대로 반환
    return trimmed;
}

// 전역 노출 (하위 호환성)
(window as any).CATEGORY_NORMALIZE_MAP = CATEGORY_NORMALIZE_MAP;
(window as any).normalizeCategory = normalizeCategory;

console.log('[CategoryNormalizeUtils] 📦 모듈 로드됨!');
